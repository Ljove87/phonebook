{"version":3,"sources":["components/Person.js","components/Filter.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","person","deletePerson","key","id","name","number","type","onClick","Filter","value","onChange","event","target","Notificaiton","message","className","baseUrl","getAll","axios","get","create","newPerson","post","update","a","request","put","response","data","delPerson","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setNewFilter","errorMsg","setErrorMsg","updatePersonAndNumber","personNewName","find","p","personNewNumber","n","window","confirm","console","log","personService","then","updatedPerson","map","catch","error","useEffect","filteredPersons","toLocaleLowerCase","indexOf","concat","Notification","onSubmit","e","preventDefault","nameObject","length","deletePersonId","ReactDOM","render","document","getElementById"],"mappings":"4PAceA,G,MAXC,SAAC,GAA6B,IAA5BC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,aACtB,OACI,yBAAKC,IAAKF,EAAOG,IACZH,EAAOG,GADZ,IACiBH,EAAOI,KADxB,IAC+BJ,EAAOK,OAClC,4BAAQC,KAAK,SAASC,QAAS,WAC/BN,EAAaD,EAAOG,MADpB,cCOGK,EAXA,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SAIvB,OACE,mDACqB,2BAAOD,MAAOA,EAAOC,SALjB,SAAAC,GACzBD,EAASC,EAAMC,OAAOH,YCSXI,EAZM,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACnB,OAAe,OAAZA,EACQ,KAIP,yBAAKC,UAAU,SACVD,I,wCCPPE,EAAU,eAoBD,GAACC,OAlBD,WACX,OAAOC,IAAMC,IAAIH,IAiBGI,OAdT,SAAAC,GACX,OAAOH,IAAMI,KAAKN,EAASK,IAaCE,OAVpB,uCAAG,WAAOpB,EAAIkB,GAAX,iBAAAG,EAAA,6DACLC,EAAUP,IAAMQ,IAAN,UAAaV,EAAb,YAAwBb,GAAMkB,GADnC,SAEYI,EAFZ,cAELE,EAFK,yBAGJA,EAASC,MAHL,2CAAH,wDAU4BC,UAJtB,SAAA1B,GACd,OAAOe,IAAMY,OAAN,UAAgBd,EAAhB,YAA2Bb,M,8NCXtC,IA2Ke4B,EA3KF,WAAO,IAAD,EAEaC,mBAAS,IAFtB,mBAEVC,EAFU,KAEDC,EAFC,OAGaF,mBAAS,IAHtB,mBAGVG,EAHU,KAGDC,EAHC,OAIiBJ,mBAAS,IAJ1B,mBAIVK,EAJU,KAICC,EAJD,OAKcN,mBAAS,IALvB,mBAKVO,EALU,KAKFC,EALE,OAMeR,mBAAS,IANxB,mBAMVS,EANU,KAMAC,EANA,KASXC,EAAwB,WAC5B,IAAMC,EAAgBX,EAAQY,MAAK,SAAAC,GAAC,OAAIA,EAAE1C,OAAS+B,KAC7CY,EAAkBd,EAAQY,MAAK,SAAAG,GAAC,OAAIA,EAAE3C,SAAWgC,KAEvD,IAAKO,IAAkBG,EACrB,OAAO,EAET,GACEH,IACCK,OAAOC,QAAP,eACSf,EADT,8EACsFE,EADtF,MAID,OAAO,EAET,GACEU,IACCE,OAAOC,QAAP,iBACWb,EADX,4EACwFF,EADxF,MAID,OAAO,EAET,IAAMW,EAAIF,GAAiBG,EACrB5C,EAAK2C,EAAE3C,GAab,OAZAgD,QAAQC,IAAI,gBAAiBN,GAE7BO,EACC9B,OAAOpB,E,yVADR,IACgB2C,EADhB,CACmB1C,KAAK+B,EAAS9B,OAAOgC,KACvCiB,MAAK,SAAAC,GACJrB,EAAWD,EAAQuB,KAAI,SAAAV,GAAC,OAAKA,EAAE3C,KAAOA,EAAK2C,EAAIS,MAC/CnB,EAAW,IACXE,EAAa,OAEdmB,OAAM,SAAAC,GACLP,QAAQC,IAAIM,EAAM/B,cAEb,GAqBTgC,qBAAU,WACRR,QAAQC,IAAI,4BACZC,EACCpC,SACAqC,MAAK,SAAA3B,GACJO,EAAWP,EAASC,MACpBuB,QAAQC,IAAI,wBAEbK,OAAM,SAAAC,GACLP,QAAQC,IAAIM,EAAM/B,UAClBwB,QAAQC,IAAI,cAGb,IAGH,IAoDIQ,EAAkB3B,EAOtB,OANIM,IACFqB,EAAkB3B,EAAQM,QACxB,SAAAO,GAAC,OAA+D,IAA3DA,EAAE1C,KAAKyD,oBAAoBC,QAAQvB,EAAOwB,OAAO,SAKxD,6BACE,yCACA,kBAACC,EAAD,CAAelD,QAAS2B,IACxB,kBAAC,EAAD,CAAQ/B,SAAU8B,EAAc/B,MAAO8B,IACvC,0BAAM0B,SAhEM,SAACC,GAEf,GADAA,EAAEC,kBACCxB,IAAH,CAGAQ,QAAQC,IAAI,WACZ,IAAMgB,EAAa,CACjBhE,KAAM+B,EACN9B,OAAQgC,EACRlC,GAAI8B,EAAQoC,OAAS,GAEvBhB,EACCjC,OAAOgD,GACPd,MAAK,SAAA3B,GAEFe,EADsB,qBAAdf,EACI,CAAC,qDAAoD,GAErD,CAAC,kBAAmBQ,EAAS,iBAAkBE,GAAW,IACtEH,EAAWD,EAAQuB,KAAI,SAAAxD,GAAM,OAAGA,EAAOG,KAAKwB,EAASxB,GAAIwB,EAAS3B,MAEpEkC,EAAWD,EAAQ8B,OAAOpC,EAASC,OACnCQ,EAAW,IACXE,EAAa,IACba,QAAQC,IAAI,mBAEbK,OAAM,SAAAC,GACLP,QAAQC,IAAIM,EAAM/B,gBAuChB,sCACQ,2BAAOjB,SAxBH,SAACC,GACjByB,EAAWzB,EAAMC,OAAOH,QAuBgBA,MAAO0B,KAE3C,wCACU,2BAAOzB,SAtBL,SAACC,GACjB2B,EAAa3B,EAAMC,OAAOH,QAqBgBA,MAAO4B,KAE7C,6BAvCaJ,EAAQuB,KAAI,SAAAV,GAAC,OAC9B,kBAAC,EAAD,CACM5C,IAAK4C,EAAE3C,GACPH,OAAQ8C,EACRzC,OAAQyC,EAAEzC,OACVJ,aAAc,SAACE,GAAD,OAtEG,SAACA,GACtBgD,QAAQC,IAAI,iBACZC,EACCxB,UAAU1B,GACVmD,MAAK,SAAA3B,GACJO,EAAWD,EAAQM,QAAO,SAAAO,GAAC,OAAIA,EAAE3C,KAAOA,MACxCgD,QAAQC,IAAIzB,GACZwB,QAAQC,IAAI,qBAEbK,OAAM,SAAAC,GACLP,QAAQC,IAAIM,EAAM/B,aA4DO2C,CAAenE,UAmCxC,6BACE,4BAAQG,KAAK,UAAb,SAGJ,uCACE,6BAAMsD,EAAgBJ,KAAI,SAAAxD,GAAM,OAAI,yBAAKE,IAAKF,EAAOG,IACdH,EAAOI,KADV,KAEGJ,EAAOK,YAGhD,8BCvKNkE,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.fe239d9c.chunk.js","sourcesContent":["import React from 'react';\r\n\r\n\r\nconst  Person = ({person, deletePerson }) => {\r\n    return (\r\n        <div key={person.id}>\r\n            {person.id} {person.name} {person.number}\r\n            <button type=\"button\" onClick={() => {\r\n            deletePerson(person.id)}\r\n        }> Delete</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person","  \r\nimport React from \"react\";\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n  const handleFilterChange = event => {\r\n    onChange(event.target.value);\r\n  };\r\n  return (\r\n    <div>\r\n      filter shown with: <input value={value} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;","import React from \"react\";\r\n\r\nconst Notificaiton = ({message}) => {\r\n    if(message === null) {\r\n        return null\r\n    }    \r\n    \r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notificaiton","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n\r\nconst create = newPerson => {\r\n    return axios.post(baseUrl, newPerson)\r\n}\r\n\r\nconst update = async (id, newPerson) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n    const response = await request\r\n    return response.data\r\n  }\r\n\r\nconst delPerson = id => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default {getAll, create, update, delPerson}\r\n","import React, {useState, useEffect} from 'react'\r\nimport './App.css';\r\nimport Person from './components/Person'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\n\r\nimport personService from './services/persons'\r\n\r\nconst  App = () => {\r\n\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState([])\r\n  const [newNumber, setNewNumber] = useState([])\r\n  const [filter, setNewFilter] = useState([])\r\n  const [errorMsg, setErrorMsg] = useState('')\r\n\r\n  // update request PUT\r\n  const updatePersonAndNumber = () => {\r\n    const personNewName = persons.find(p => p.name === newName)\r\n    const personNewNumber = persons.find(n => n.number === newNumber)\r\n\r\n    if (!personNewName && !personNewNumber) {\r\n      return false;\r\n    };\r\n    if (\r\n      personNewName &&\r\n      !window.confirm(\r\n        `Name ${newName} is already in the phonebook.\\nDo you want to update the number to ${newNumber}?`\r\n      )\r\n    ) {\r\n      return false;\r\n    }\r\n    if (\r\n      personNewNumber &&\r\n      !window.confirm(\r\n        `Number ${newNumber} is already in the phonebook.\\nDo you want to update the name to ${newName}?`\r\n      )\r\n    ) {\r\n      return false;\r\n    }\r\n    const p = personNewName || personNewNumber;\r\n    const id = p.id;\r\n    console.log('UpdatePersons', p)\r\n\r\n    personService\r\n    .update(id, {...p, name:newName, number:newNumber})\r\n    .then(updatedPerson => {\r\n      setPersons(persons.map(p => (p.id !== id ? p : updatedPerson)));\r\n      setNewName('');\r\n      setNewNumber('');\r\n    })\r\n    .catch(error => {\r\n      console.log(error.response);\r\n    })\r\n    return true;\r\n  };\r\n\r\n  // delete person by his ID using axios\r\n    const deletePersonId = (id) => {\r\n      console.log('delete person')\r\n      personService\r\n      .delPerson(id)\r\n      .then(response => {\r\n        setPersons(persons.filter(p => p.id !== id))\r\n        console.log(response)\r\n        console.log('deletePersonId')\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response)\r\n      }) \r\n    }\r\n\r\n\r\n\r\n  // effect hook for getting json data\r\n  useEffect(() => {\r\n    console.log('UseEffect, getAllRequest')\r\n    personService\r\n    .getAll()\r\n    .then(response => {\r\n      setPersons(response.data)\r\n      console.log('promise fullfiled')\r\n    })\r\n    .catch(error => {\r\n      console.log(error.response)\r\n      console.log('error')\r\n    })\r\n  \r\n  }, [])\r\n\r\n  // adding new names using json data with axios\r\n  const addName = (e) => {\r\n    e.preventDefault()\r\n    if(updatePersonAndNumber()) {\r\n      return;\r\n    }\r\n    console.log('addName')\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      id: persons.length + 1\r\n    }\r\n    personService\r\n    .create(nameObject)\r\n    .then(response => {\r\n      if(typeof(response) === 'undefined')\r\n        setErrorMsg([\"Number already deleted, please refresh to reflect\",false])\r\n      else\r\n        setErrorMsg([\"Added new name \", newName, \" with a number\", newNumber ,true])\r\n        setPersons(persons.map(person=>(person.id===response.id)?response:person))\r\n              \r\n      setPersons(persons.concat(response.data))\r\n      setNewName('')\r\n      setNewNumber('')\r\n      console.log('addedNewName')\r\n    })\r\n    .catch(error => {\r\n      console.log(error.response)\r\n    })\r\n  }\r\n\r\n\r\n  // maping persons and getting a list of persons\r\n  const rows = () => persons.map(p => \r\n    <Person \r\n          key={p.id} \r\n          person={p}\r\n          number={p.number} \r\n          deletePerson={(id) => (deletePersonId(id))}\r\n          />\r\n  )\r\n  \r\n  // add button event\r\n  const handleAdd = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  // add number event\r\n  const addNumber = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  // filter persons with input element\r\n  let filteredPersons = persons;\r\n  if (filter) {\r\n    filteredPersons = persons.filter(\r\n      p => p.name.toLocaleLowerCase().indexOf(filter.concat('')) !== -1\r\n    );\r\n  }\r\n\r\n  return ( \r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification  message={errorMsg}/>\r\n      <Filter onChange={setNewFilter} value={filter}  />\r\n      <form onSubmit={addName}>\r\n        <div>\r\n          name: <input onChange={handleAdd} value={newName}/>\r\n        </div>\r\n        <div>\r\n          number: <input onChange={addNumber} value={newNumber}/>\r\n        </div>\r\n        <div>{rows()}</div>\r\n        <div>\r\n          <button type=\"submit\">Add</button>\r\n        </div>\r\n      </form>\r\n      <h2>Numbers</h2>\r\n      { <div>{filteredPersons.map(person => <div key={person.id}>\r\n                                              {person.name} / \r\n                                              {person.number}\r\n                                          </div>)}\r\n      </div> }\r\n      <p></p>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}