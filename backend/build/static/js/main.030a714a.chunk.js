(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(42)},22:function(e,n,t){},23:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(15),c=t.n(o),u=(t(22),t(16)),l=t(3),i=(t(23),function(e){var n=e.person,t=e.deletePerson;return a.a.createElement("div",{key:n.id},n.name," --- ",n.number,a.a.createElement("button",{type:"button",onClick:function(){t(n.id)}}," DELETE"))}),s=function(e){var n=e.value,t=e.onChange;return a.a.createElement("div",null,"filter shown with: ",a.a.createElement("input",{value:n,onChange:function(e){t(e.target.value)}}))},f=function(e){var n=e.message;return null===n?null:a.a.createElement("div",{className:"error"},n)},p=t(2),d=t.n(p),m=t(5),b=t(4),v=t.n(b),h="/api/persons",g={getAll:function(){return v.a.get(h)},create:function(){var e=Object(m.a)(d.a.mark((function e(n){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(h,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(m.a)(d.a.mark((function e(n,t){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.a.put("".concat(h,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),delPerson:function(){var e=Object(m.a)(d.a.mark((function e(n){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat(h,"/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()};function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var O=function(){var e=Object(r.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)([]),p=Object(l.a)(c,2),d=p[0],m=p[1],b=Object(r.useState)([]),v=Object(l.a)(b,2),h=v[0],O=v[1],w=Object(r.useState)([]),y=Object(l.a)(w,2),j=y[0],k=y[1],P=Object(r.useState)(""),x=Object(l.a)(P,2),D=x[0],N=x[1],S=function(){var e=t.find((function(e){return e.name===d})),n=t.find((function(e){return e.number===h}));if(!e&&!n)return!1;if(e&&!window.confirm("Name ".concat(d," is already in the phonebook.\nDo you want to update the number to ").concat(h,"?")))return!1;if(n&&!window.confirm("Number ".concat(h," is already in the phonebook.\nDo you want to update the name to ").concat(d,"?")))return!1;var r=e||n,a=r.id;return console.log("UpdatePersons",r),g.update(a,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(t,!0).forEach((function(n){Object(u.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},r,{name:d,number:h})).then((function(e){o(t.map((function(n){return n.id!==a?n:e}))),m(""),O("")})).catch((function(e){console.log(e.response)})),!0};Object(r.useEffect)((function(){console.log("UseEffect, getAllRequest"),g.getAll().then((function(e){o(e.data),console.log("promise fullfiled")})).catch((function(e){console.log(e.response),console.log("error")}))}),[]);var C=t;return j&&(C=t.filter((function(e){return-1!==e.name.toLocaleLowerCase().indexOf(j.concat(""))}))),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(f,{message:D}),a.a.createElement(s,{onChange:k,value:j}),a.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),!S()){console.log("addName");var n={name:d,number:h,id:t.length+1};g.create(n).then((function(e){N("undefined"===typeof e?["Number already deleted, please refresh to reflect",!1]:["Added new name ",d," with a number",h,!0]),o(t.map((function(n){return n.id===e.id?e:n}))),o(t.concat(e.data)),m(""),O(""),console.log("addedNewName")})).catch((function(e){console.log(e.response)}))}}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:function(e){m(e.target.value)},value:d})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:function(e){O(e.target.value)},value:h})),a.a.createElement("div",null,t.map((function(e){return a.a.createElement(i,{key:e.id,person:e,number:e.number,deletePerson:function(e){return function(e){console.log("delete person"),g.delPerson(e).then((function(n){o(t.filter((function(n){return n.id!==e}))),console.log(n),console.log("deletePersonId")})).catch((function(e){console.log(e.response)}))}(e)}})}))),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"Add"))),a.a.createElement("h2",null,"Numbers"),a.a.createElement("div",null,C.map((function(e){return a.a.createElement("div",{key:e.id},e.name," /",e.number)}))),a.a.createElement("p",null))};c.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.030a714a.chunk.js.map